# 클린코드

## 깨끗한 코드

### 나쁜 코드의 대가

나쁜 코드로 치르는 대가는 치명적으로 보인다. 코드가 소위이 말하는 쓰레기 코드라면 프로젝트 진도가 안 나가는 일이 있을 수도 있으며 개발 속도를 실제로도 크게 떨어뜨린다. 예를 들자면 프로젝트 초반에 마구잡이로 코드를 작성해서 진도가 번개처럼 빠르게 나가지만 불과 1~2년 만에 굼뱅이 기억가는 속도로 진도가 나가는 경우가 있다. 나쁜 코드가 쌓일수록 팀의 생산력은 떨어지고 결국 0에 근접하게 된다. 

하지만 나쁜코드를 알면서도 기한에 맞추려면 어쩔 수 없다라는 생각으로 작성하는 경우도 많은데 사실 나쁜코드로 작업을 계속하다보면최종적으로 작업속도가 느려지는게 당연한 수순이기 때문에 초반에 시간이 걸리더라도 시간을 들여 시작하는 것이 옳은 방법이다. **기한을 맞추는 유일한 방법은, 즉 빨리 가는 유일한 방법은, 언제나 코드를 퇴대한 깨끗하게 유지하는 습관이다.** 

### 깨끗한 코드란?

"그렇다면 깨끗한 코드란 무엇일까?"에 대한 답변은 프로그래밍 분야의 유명하고 노련한 프로그래머들에게 의견을 구했다. 

**비아네 스트롭스트롭** : 우아하고 효율적인 코드, 논리가 간단하여 버그가 숨어들지 못하는 코드

**그레디 부치** : 단순하고 직접적인 코드, 명쾌한 추상화와 단순한 제어문으로 설계장의 의도를 뚜렷하게 보여주는 코드

**빅 데이브 토마스** : 작성자가 아닌 사람도 읽기 쉽고 고치기 쉬운 코드, 가독성이 좋은 코드

**마이클 페더스** : 누군가 주의깊게 짰다는 느낌을 ㄷ주는 코드, 고치려고 해도 손 댈 곳이 없는 ㅋ드

**론 제프리스** : 중복이 없고 표현력이 높으며 초반부터 간단한 추상화가 고려된 코드

**워드 커닝햄** : 코드를 읽을 때 짐작했던 기능대로 동작하는 코드

## 의미 있는 이름

소프트웨어에서 이름은 어디나 쓰인다. 변수, 함수, 인수, 클래스 등등 어디에나 이름을 붙인다. 이렇게 이름을 지어야할 부분이 많기 때문에 이름을 잘 지으면 여러모로 편하다. 

+ **의도를 분명히 밝혀라**
  의도가 분명한 이름을 지으라고 말하기는 쉽다. 하지만 좋은 이름을 짓는데는 시간이 많이걸린다. 그럼에도 불구하고 좋은 이름을 지으라고 강조하는 것은 좋은 이름을 지음으로 절약하는 시간이 훨씬 더 많기 때문이다. 의도가 드러나는 이름을 사용하면 코드의 이해와 변경이 쉬워진다. 
+ **그릇된 정보를 피하라**
  코드에 잘못된 단서를 남겨서는 안된다. 실제로 List가 아니라면 List라는 단어를 포함해서 명명하면 안 된다. 또한 서로 흡사한 이름을 사용하지 않도록 주의해야한다. 일관성이 떨어지는 표기법도 그릇된 정보이다. 또한 그릇된 정보를 제공하는 정말 끔찍한 예는 소문자 L또는 대문자 O이다. 이를 한꺼번에 사용하면 숫자와 구분하기 힘들기 때문에 절대 사용하지 않도록 한다.

+ **의미 있게 구분하라**
  불용어, 연속된 숫자 등을 제거한다. 
  *불용어 : 갖고 있는 데이터에서 유의미한 단어 토큰만을 선별하기 위해서는 큰 의미가 없는 단어 토큰을 제거하는 작업이 필요합니다. 여기서 큰 의미가 없다라는 것은 자주 등장하지만 분석을 하는 것에 있어서는 큰 도움이 되지 않는 단어들을 말합니다.*
+ **발음하기 쉬운 이름을 사용하라**
  어려운 이름은 토론하기도 어렵다. 그렇기 때문에 모두가 아는 단어를 사용해야 코드의 지적인 대화가 가능해진다. 
+ **검색하기 쉬운 이름을 사용하라**
+ **인코딍을 피하라**
  새로운 개발자는 이미 습득해야할 정보가 많다 거기에 인코딩까지 익히라는 요구는 비합리적이다. 게다가 인코딩 이름은 발음하기가 어려우며 오타가 생기는 경우도 많다. 
+ **한 개념에 한 단어를 사용하라**
+ **기발한 이름은 피하라**
  유머감각이 비슷한 사람만, 그리고 농담을 기억하는 동안만 기억할만한 이름으로 명명하지 않도록 한다. 의도는 늘 분명하고 솔직해야한다.
+ **해법 영역에서 가져온 이름을 사용하라**
  코드를 읽을 사람도 프로그래머기 때문에 전산용어, 알고리즘 이름, 패턴 이름등을 사용해도 괜찮다. 
+ **문제영역에서 가져온 이름을 사용하라**
  적절한 프로그래머 용어가 없다면 도메인 영역에서의 이름을 사용한다. 
+ **의미있는 맥락을 추가하라**

좋은 이름을 선택하려면 설명 능력이 뛰어나거니와 문화적인 배경이 같아야한다. 이것이 가장 어려운 부분이라고 할 수 있지만 또 가장 중요한 부분이라고도 할 수 있다.

## 함수

함수를 만드는 첫번째 규칙은 작게 만드는 것이다. 함수가 작을수록 좋다는 증거나 자료를 제시하기는 어렵지만 거의 3,000 줄이 넘어가는  함수를 본다면 끔찍하다고 생각할 수 있다. 우선 함수를 작게 만드는 것이 좋다면 얼마나 짧으면 좋은것일까? 켄트의 코드를 봤을때 함수는 너무나도 작았는데 모든 함수가 2줄~4줄에 불과했다. 그렇다면 일반적으로 5줄 정도가 적당하다고 본다. 이 말은 중첩구조가 생길만큼 함수가 커져서는 안 된다는 뜻이다. 즉 들여쓰기의 수준이 2단을 넘어서지 않도록 하는 것이 좋다. 

**함수는 한 가지의 일만 해야하며 그 한 가지의 일을 잘 해야한다.** 함수가 확힐하게 한 가지의 작업만 하려면 함수내의 모든 문장의 추상화의 수준이 동일해야한다.

또한 코드는 위에서 아래로 이야기 처럼 읽혀야좋다. 한 함수 뒤에는 추상화 수준이 한 단계 낮은 함수가 와야한다. 

> TO 설정 페이지와 해제 페이지를 포함하려면, 설정 페이지를 포함하고 테스트 페이지 내용을 포함하고 해제 페이지를 포함한다.
>
> ​		TO 설정 페이지를 포함하려면, 슈트 설정 페이지를 포함한 후 일반 설정 페이지를 포함한다
>
> ​				TO 슈트 설정 페이지를 포함하려면 ....

함수를 만들 대는 서술적인 이름을 사용하는 것이 좋다. 이름이 길어도 괜찮다 겁먹을 필요가 없다. 길고 서술적인 이름이 짧고 어려운 이름보다 좋으며 길고 서술적인 주석보다 좋다. 서술적인 이름을 사용하면 개발자의 머릿속 설계도 뚜렷해지고 코드를 개선하기도 쉬워진다.

함수에서의 이상적인 인수 개수는 0개(무항)이다. 그 다음으로 단항이 좋고 그다음은 이항.. 이렇게 적으면 적을 수록 좋은 것이다. 많이 쓰는 단항 형식이라고 하면 인스를 향해 질문을 던지는 경우이고 다른 하나는 인수로 반환값을 도출해내는 경우이다. 그리고 단항 형식에서 플래그 인수는 안 좋은 방법이라고 볼 수 있다. 그러한 형식의 함수는 인수가 참일때는 어떤 작업, 거짓일 때는 어떤 작업, 이렇게 두 가지의 일을 하겠다고 대놓고 공표하는 형식이기 때문에 지양하는 것이 좋다. 2항함수는 인수 두개가 하나의 값 (ex : 좌표)를 표현하는 것이 아니라면 사용하지 않는 것이 좋다. 만약에 여러가지의 인수를 전달해야한다면 객체로 만들어서 전달하는 것도 방법일 수 있다. 

부수효과를 일으키지 않는 함수를 작성해야한다. 부수효과는 함수에서 한 가지를 하겠다고 약속하고 남몰래 다른 동작도 수행하는 것이다. 예를들면 함수의 이름은 checkPassword인데 valied 일 때 로그인 하는 동작까지 한다면 함수의 의도와 다르다고 할 수 있다. 

함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야한다. 그리고 오류 처리도 한 가지의 자업이다. 그러므로 오류 처리를 하는 함수가 따로 오류처리만 하도록 만들어져있어야한다.

함수를 짜는 행위는 여느 글짓기와 비슷하다. 먼저 생각을 기록한 후에 읽기 좋게 다듬을 수 있다. 마찬가지로 처음에는 길고 복잡하며 들여쓰기도 많고 중복된 루프도 많지만 서투른 코드를 빠짐없이 다듬고 함수를 만들고 이름을 바꾸고 중복을 제거하며 메서드를 줄이고 순서를 바꾼다. 때로는 전체 클래스를 쪼개기도 하여 함수를 작성하도록 하면 된다.

## 주석

프로그래머들은 주석을 엄격하게 관리해야 복구성과 관련성과 언제나 정확성이 높아진다고 주장했다. 하지만 이러한 방법 말고 코드를 깔끔하게 정리하여 표현력을 강화하는 방향으로, 그래서 주석이 필요 없는 방향으로 바꿀 수 있다고 생각한다. 주석은 자신을 표현할 방법으로 쓰이는데 그렇다면 코드로 제 할 일을 표현하는 것도 방법이 될 수 있다. 

**주석은 나쁜 코드를 보완하지 못한다.** 주석을 코드에 추가하는 일반적인 이유는 코드의 품질이 나쁘기 때문이다. 이럴때는 지저분한 모듈이라는 사실을 자각하고 주석을 다는 것이 아니라 코드를 정리해야한다. 그러므로써 코드로 의도를 표현할 수 있다.

### 좋은 주석

+ 법적인 주석
+ 정보를 제공하는 주석
+ 의도를 설명하는 주석
+ 의미를 명료하게 밝히는 주석
+ 결과를 경고하는 주석
+ TODO 주석
+ 중요성을 강조하는 주석

### 나쁜 주석

+ 같은 이야기를 중복하는 주석
+ 오해할 여지가 있는 주석
+ 의무적으로 다는 주석
+ 이력을 기록하는 주석
+ 있으나 마나 한 주석 : 너무 당연한 사실을 언급하면서 새로운 정보를 제공하지 못하는 주석
+ 함수로 표현 할 수 있다면 주석을 달지 말아라
+ 닫는 괄호에 다는 주석
+ 함수 헤더

## 형식 맞추기

코드의 형시을 맞추는 거슨 중요하다. 너무 중요해서 무시하기 어렵지만 그렇다고 융통성 없이 맹목적으로 따르면 안 된다. 코드는 의사소통의 일환이다. 그렇다면 원활한 소통을 장려하는 코드 형식은 무엇일까?

반드시 지킬 엄격한 규칙은 아니지만 바람직한 규칙 중 하나는 코드의 세로 길이이다. 예를 들자면 JUnit, FitNesse, testNG, Time and Money 등의 프로젝트를 조사한 결과 대부분이 500중를 넘기지 않고 200줄에 육박하는 시스템이었다. 아주 좋은 신문 기사를 떠올려보라. 독자는 위에서 아래로 기사를 읽는다. 소스 파일도 신문 기사와 비슷하게 작성해야한다. 이름은 간단하며 설명이 가능해야한다. 이름만 보고도 올바른 모듈인지 아닌지를 살필 수 있도록 판단 할 수 있을정도로 명확하게 정해야하고 아래로 내려갈수록 의도를 세세하게 묘사해야한다. 

개념은 빈 행으로 분리한다. 거의 모든 코드는 왼쪽에서 오른쪽으로 그리고 위에서 아래로 읽힌다. 각 행은 수식과 절을 나타내고 일련의 행은 완결된 생각 하나를 포함한다.이렇게 완결된 행과 행 사이 즉, 개념과 개념 사이를 빈 행으로 분리하면 가독성을 올릴 수 있다.